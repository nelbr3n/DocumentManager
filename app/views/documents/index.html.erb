<p id="notice">
  <%= notice %>
</p>

<h3><%= current_user.department.departmentName.capitalize %> Documents</h3>

<%= grid(@documents) do |g|

  g.column name: 'Document Code'  do |document|
    document.documentCode
  end

  g.column name: 'Sender Email' do |document|
    document.isSenderPrivate && current_user.email != document.sender.email ? "Privado" : document.sender.email
  end

  g.column name: 'Receiver Email' do |document|
    document.isReceiverPrivate && current_user.email != document.receiver.email ? "Privado" : document.receiver.email
  end

  g.column name: 'Creator Email' do |document|
    document.creator.email
  end

  g.column name: 'Subject' do |document|
    document.subject
  end

  g.column name: 'Sender Status' do |document|
  document.senderStatus.id
end

g.column name: 'Receiver Status' do |document|
document.receiverStatus.id
end

  g.column name: 'Date' do |document|
    document.date
  end

  g.column do |document|
    link_to('Show', document)
  end

end -%>

  <!-- <table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Documentcode</th>
      <th>Senderemail</th>
      <th>Receiver Email</th>
      <th>Creator Email</th>
      <th>Subject</th>
      <th>Date</th>
      <th>Content</th>
      <th>Tags</th>
      <th>Conversationid</th>
      <th>Senderstatus</th>
      <th>Receiverstatus</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @documents.each do |document| %>
      <% bandera = false %>
      <% if document.isReceiverPrivate && current_user.email == document.receiver.email || !document.isReceiverPrivate && current_user.department_id == document.receiver.department_id %>
        <% bandera = true %>
      <% end %>
      <% if bandera || document.isSenderPrivate && current_user.email == document.sender.email || !document.isSenderPrivate && current_user.department_id == document.sender.department_id%>
        <tr>
          <td><%= document.id %>
          <td><%= document.documentCode %></td>
          <% if document.isSenderPrivate and current_user.email != document.sender.email%>
            <td>Private</td>
          <% else %>
            <td><%= document.sender.email %></td>
          <% end %>
          <% if document.isReceiverPrivate and current_user.email != document.receiver.email%>
            <td>Private</td>
          <% else %>
            <td><%= document.receiver.email %></td>
          <% end %>
          <td><%= document.creator.email %></td>
          <td><%= document.subject %></td>
          <td><%= document.date %></td>
          <td><%= document.content %></td>
          <td><%= document.tags %></td>
          <td><%= document.conversationId %></td>
          <td><%= document.senderStatus.title %></td>
          <td><%= document.receiverStatus.title %></td>
          <td><%= link_to 'Show', document %></td>
          <td><%= link_to 'Destroy', document, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table> -->

  <br>

  <%= link_to 'New Document', new_document_path({:conversationId => getNextConvID()}) %>